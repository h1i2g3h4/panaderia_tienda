<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Carrito - Fernanda Monsalve Bakery</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <header>
    <img src="img/logo.png" alt="Logo Panader√≠a" class="logo">
    <h1>Pedidos</h1>
    <nav>
      <ul>
        <li><a href="index.html">Inicio</a></li>
        <li><a href="catalogo.html">Cat√°logo</a></li>
        <li><a href="carrito.html">Carrito</a></li>
        <li><a href="cotizacion.html">Cotizaci√≥n</a></li>
        <li><a href="contacto.html">Contacto</a></li>
      </ul>
    </nav>
  </header>

 <main>
  <div id="lista-carrito" class="grid"></div>
  <h3>Total: $<span id="total">0</span></h3>
   <h2>Personalizaci√≥n de tortas</h2>
<form id="form-personalizado">
  <label>Tipo de torta:
    <select id="tipo">
      <option>Bizcocho</option>
      <option>Red Velvet</option>
      <option>Chocolate</option>
      <option>Vainilla</option>
    </select>
  </label><br>

  <label>Porciones:
    <select id="porciones">
      <option>10</option>
      <option>20</option>
      <option>30</option>
    </select>
  </label><br>

  <label>Sabor:
    <select id="sabor">
      <option>Chocolate</option>
      <option>Vainilla</option>
      <option>Fresa</option>
      <option>Mixto</option>
    </select>
  </label><br>

  <label>Relleno:
    <select id="relleno">
      <option>Arequipe</option>
      <option>Crema</option>
      <option>Frutas</option>
    </select>
  </label><br>

  <label>Color de decoraci√≥n:
    <select id="color">
      <option>Blanco</option>
      <option>Rosa</option>
      <option>Azul</option>
      <option>Dorado</option>
    </select>
  </label><br>

  <label>Tem√°tica:
    <select id="tematica">
      <option>Infantil</option>
      <option>Bodas</option>
      <option>Cumplea√±os</option>
      <option>Aniversario</option>
    </select>
  </label><br>

  <label>Imagen de referencia:
    <input type="file" id="imagenRef" />
  </label>
</form>

  <button class="btn" onclick="hacerPedido()">Hacer pedido</button>

</main>

  <footer>
    <p>&copy; 2025 Fernanda Monsalve Bakery</p>
  </footer>

  <script src="js/carrito.js"></script>
<!-- Al final del body -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="js/supabaseClient.js"></script>
<script src="js/carrito.js"></script>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
<script>
  (function() {
    emailjs.init("48bGLXBL41rKsHZm-"); // Clave p√∫blica de tu cuenta
  })();

  function hacerPedido() {
  const lista = document.getElementById("lista-carrito").innerText;
  const total = document.getElementById("total").innerText;

  // üîπ Capturamos los datos de personalizaci√≥n
  const tipo = document.getElementById("tipo").value;
  const porciones = document.getElementById("porciones").value;
  const sabor = document.getElementById("sabor").value;
  const relleno = document.getElementById("relleno").value;
  const color = document.getElementById("color").value;
  const tematica = document.getElementById("tematica").value;

  // üîπ Armamos el cuerpo completo del pedido
  const cuerpo = `
    Pedido realizado desde la p√°gina web:

    Productos:
    ${lista}

    Total: $${total}

    --- Personalizaci√≥n ---
    Tipo: ${tipo}
    Porciones: ${porciones}
    Sabor: ${sabor}
    Relleno: ${relleno}
    Color: ${color}
    Tem√°tica: ${tematica}
  `;

  // üîπ Enviamos por EmailJS
  const templateParams = {
    message: cuerpo,
    from_name: "Cliente Web",
    to_email: "fernandamonsalvebakery4@gmail.com"
  };

  emailjs.send("service_6nmyz5b", "template_xb13pnnD", templateParams)
    .then(() => {
      alert("‚úÖ Pedido enviado por correo");
    })
    .catch((err) => {
      alert("‚ùå Error al enviar pedido: " + JSON.stringify(err));
    });
}

</script>

</body>
</html>
